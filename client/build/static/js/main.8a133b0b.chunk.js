(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{49:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),s=n(23),i=n.n(s),u=n(8),o=n(9),l=n(2),j=n(26),p=(n(49),n.p+"static/media/logo.18c91bd8.png"),d=function(e){var t=e.component,n=Object(j.a)(e,["component"]);return Object(a.jsxs)("main",{className:"game-container",children:[Object(a.jsx)("img",{src:p,className:"logo",alt:"Twitch Bingo by TenMatous"}),Object(a.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return Object(a.jsx)(t,Object(l.a)({},e))}}))]})},m=n(4),b=Object(m.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return Object(a.jsx)("div",{className:"alert alert-".concat(e.alertType),children:e.msg},e.id)}))})),h=n(3),O=n.n(h),f=n(6),x=n(7),g=n.n(x),v=n(78),y="SET_ALERT",k="REMOVE_ALERT",w="REGISTER_SUCCESS",N="REGISTER_FAIL",T="USER_LOADED",E="AUTH_ERROR",S="LOGIN_SUCCESS",C="LOGIN_FAIL",G="LOGOUT",A="ACCOUNT_DELETED",_="GET_GAMES",F="GET_GAME",I="ADD_GAME",R="UPDATE_GAME",z="CLEAR_GAME",D="DELETE_GAME",L="GAME_ERROR",M="GET_TICKETS",Y="GET_TICKET",P="DELETE_TICKETS",U="TICKET_ERROR",K="GET_USERS",H="USER_ERROR",B=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(a){var r=Object(v.a)();a({type:y,payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return a({type:k,payload:r})}),n)}},J=function(e){e?g.a.defaults.headers.common["x-auth-token"]=e:delete g.a.defaults.headers.common["x-auth-token"]},V=function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&J(localStorage.token),e.prev=1,e.next=4,g.a.get("/api/auth");case 4:n=e.sent,t({type:T,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:E});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Z=Object(m.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e(B("Byl/a jsi odhl\xe1\u0161en/a.","success")),e({type:G})}}})((function(e){var t=e.auth,n=t.isAuthenticated,r=t.loading,c=e.logout;return Object(a.jsx)(a.Fragment,{children:!r&&Object(a.jsx)(a.Fragment,{children:n&&Object(a.jsxs)("nav",{className:"navbar bg-dark",children:[Object(a.jsx)("h1",{children:"Administrace"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/admin/games",children:"Spr\xe1va her"})}),Object(a.jsx)("li",{children:Object(a.jsx)(u.b,{to:"/admin/users",children:"Spr\xe1va \xfa\u010dt\u016f"})}),Object(a.jsx)("li",{children:Object(a.jsx)("a",{href:"#!",onClick:c,children:"Odhl\xe1sit se"})})]})]})})})})),q=Object(m.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,n=e.auth,r=n.isAuthenticated,c=n.loading,s=Object(j.a)(e,["component","auth"]);return Object(a.jsx)(o.b,Object(l.a)(Object(l.a)({},s),{},{render:function(e){return r||c?Object(a.jsx)(t,Object(l.a)({},e)):Object(a.jsx)(o.a,{to:"/login"})}}))})),W=n(16),Q=n(10),X=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(f.a)(O.a.mark((function n(a){var r,c,s,i;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,g.a.post("/api/auth",c,r);case 5:s=n.sent,a({type:S,payload:s.data}),a(V()),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(2),(i=n.t0.response.data.errors)&&i.forEach((function(e){return a(B(e.msg,"danger"))})),a({type:C});case 15:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,c=Object(r.useState)({email:"",password:""}),s=Object(Q.a)(c,2),i=s[0],j=s[1],p=i.email,d=i.password,m=function(e){j(Object(l.a)(Object(l.a)({},i),{},Object(W.a)({},e.target.name,e.target.value)))},b=function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(p,d);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(a.jsx)(o.a,{to:"/admin"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"large text-primary",children:"P\u0159ihl\xe1\u0161en\xed"}),Object(a.jsxs)("form",{className:"form",onSubmit:function(e){return b(e)},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"email",placeholder:"E-mailov\xe1 adresa",name:"email",value:p,onChange:function(e){return m(e)},required:!0})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",placeholder:"Heslo",minLength:"6",name:"password",value:d,onChange:function(e){return m(e)},required:!0})}),Object(a.jsx)("input",{type:"submit",value:"P\u0159ihl\xe1sit se",className:"btn btn-primary"})]}),Object(a.jsxs)("p",{className:"my-1",children:["Je\u0161t\u011b nem\xe1\u0161 sv\u016fj \xfa\u010det? ",Object(a.jsx)(u.b,{to:"/register",children:"Zalo\u017e si ho"}),"."]})]})})),$=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{setAlert:B,register:function(e){var t=e.name,n=e.email,a=e.password;return function(){var e=Object(f.a)(O.a.mark((function e(r){var c,s,i,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json"}},s=JSON.stringify({name:t,email:n,password:a}),e.prev=2,e.next=5,g.a.post("/api/users",s,c);case 5:i=e.sent,r({type:w,payload:i.data}),r(V()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),(u=e.t0.response.data.errors)&&u.forEach((function(e){return r(B(e.msg,"danger"))})),r({type:N});case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.setAlert,n=e.register,c=e.isAuthenticated,s=Object(r.useState)({name:"",email:"",password:"",password2:""}),i=Object(Q.a)(s,2),j=i[0],p=i[1],d=j.name,m=j.email,b=j.password,h=j.password2,x=function(e){p(Object(l.a)(Object(l.a)({},j),{},Object(W.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(f.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),b!==h?t("Zadan\xe1 hesla se neshoduj\xed.","danger"):n({name:d,email:m,password:b});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c?Object(a.jsx)(o.a,{to:"/admin"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{className:"large text-primary",children:"Registrace"}),Object(a.jsxs)("form",{className:"form",onSubmit:function(e){return g(e)},children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"text",placeholder:"Jm\xe9no",name:"name",value:d,onChange:function(e){return x(e)},required:!0})}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("input",{type:"email",placeholder:"E-mailov\xe1 adresa",name:"email",value:m,onChange:function(e){return x(e)},required:!0}),Object(a.jsx)("small",{className:"form-text",children:"This site uses Gravatar, so if you want a profile image, use a Gravatar e-mail."})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",placeholder:"Heslo",minLength:"6",name:"password",value:b,onChange:function(e){return x(e)},required:!0})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)("input",{type:"password",placeholder:"Potvr\u010f heslo",minLength:"6",name:"password2",value:h,onChange:function(e){return x(e)},required:!0})}),Object(a.jsx)("input",{type:"submit",value:"Zalo\u017eit \xfa\u010det",className:"btn btn-primary"})]}),Object(a.jsxs)("p",{className:"my-1",children:["U\u017e m\xe1s sv\u016fj \xfa\u010det? ",Object(a.jsx)(u.b,{to:"/login",children:"P\u0159ihlas se"}),"."]})]})})),ee=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"spinner"})})},te=n(19),ne=n.n(te),ae=Object(m.b)((function(e){return{auth:e.auth}}),{deleteGame:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Opravdu chce\u0161 smazat tuto hru? U\u017e to nejde vr\xe1tit.")){t.next=11;break}return t.prev=1,t.next=4,g.a.delete("/api/games/".concat(e));case 4:n({type:D,payload:e}),n(B("Hra smaz\xe1na.","success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.auth,n=e.game,r=n._id,c=n.key,s=n.title,i=n.user,o=n.date,l=e.deleteGame;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s?Object(a.jsx)(a.Fragment,{children:s}):Object(a.jsx)("em",{children:"bez n\xe1zvu"})}),Object(a.jsx)("td",{className:"hide-sm",children:c}),Object(a.jsx)("td",{className:"hide-sm",children:Object(a.jsx)(ne.a,{format:"D. M. YYYY H:mm",children:o})}),Object(a.jsxs)("td",{children:[Object(a.jsx)(u.b,{to:"/admin/game/".concat(r),className:"btn btn-warning",children:Object(a.jsx)("i",{className:"fas fa-cog"})}),!t.loading&&i===t.user._id&&Object(a.jsx)("button",{type:"button",className:"btn btn-danger",onClick:function(){return l(r)},children:Object(a.jsx)("i",{className:"fas fa-times"})})]})]})})),re=Object(m.b)((function(e){return{game:e.game}}),{getGames:function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/api/games");case 3:n=e.sent,t({type:_,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:L,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getGames,n=e.game,c=n.games,s=n.loading;return Object(r.useEffect)((function(){t()}),[t]),s?Object(a.jsx)(ee,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"my-1",children:[Object(a.jsx)("div",{className:"float-buttons",children:Object(a.jsx)(u.b,{to:"/admin/games/create",className:"btn btn-success",children:"Vytvo\u0159it hru"})}),Object(a.jsx)("h2",{children:"Spr\xe1va her"})]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"N\xe1zev"}),Object(a.jsx)("th",{className:"hide-sm",children:"Kl\xed\u010d"}),Object(a.jsx)("th",{className:"hide-sm",children:"Vytvo\u0159eno"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:c.map((function(e){return Object(a.jsx)(ae,{game:e},e._id)}))})]})]})})),ce=function(e){var t=e.value,n="text";return e.isTip&&(n+=" tip"),e.isResult&&(n+=" result"),Object(a.jsx)("div",{className:"tile",children:Object(a.jsx)("div",{className:n,children:t})})},se=function(e){var t=e.template,n=e.tips,r=e.results,c=e.handleTileClick;return Object(a.jsx)("div",{className:"bingo",children:t.map((function(e,s){return Object(a.jsx)("div",{className:"row",children:e.map((function(e,i){return Object(a.jsx)("div",{className:"column",onClick:function(){return c(s,i)},children:Object(a.jsx)(ce,{value:t[s][i],isTip:!!n&&n[s][i],isResult:!!r&&r[s][i]})},i)}))},s)}))})},ie=Object(m.b)((function(e){return{game:e.game}}))((function(e){var t=e.ticket,n=t.stamp,c=t.tips,s=t.getdate,i=t.submitdate,u=e.game.game.results,o=Object(r.useState)(!1),l=Object(Q.a)(o,2),j=l[0],p=l[1];return Object(r.useEffect)((function(){for(var e=u.flat(),t=c.flat(),n=!1,a=0;a<t.length;a++)if(!0===t[a]){if(!0!==e[a]){n=!1;break}n=!0}p(n)}),[u,p]),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{className:"hide-sm",children:Object(a.jsx)(ne.a,{format:"D. M. YYYY H:mm:ss",children:s})}),Object(a.jsx)("td",{className:"hide-sm",children:i?Object(a.jsx)(ne.a,{format:"D. M. YYYY H:mm:ss",children:i}):Object(a.jsx)("span",{children:"neodevzd\xe1no"})}),Object(a.jsx)("td",{children:j&&Object(a.jsx)("span",{children:"BINGO!"})})]})})),ue=Object(m.b)((function(e){return{game:e.game,ticket:e.ticket}}),{getTickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(f.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="/api/tickets",e&&(a="/api/tickets/game/".concat(e)),t.prev=2,t.next=5,g.a.get(a);case 5:r=t.sent,n({type:M,payload:r.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n({type:U,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},deleteTickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(f.a)(O.a.mark((function t(n){var a,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Opravdu chce\u0161 smazat v\u0161echny tikety? U\u017e to nejde vr\xe1tit.")){t.next=14;break}return a="/api/tickets",e&&(a="/api/tickets/game/".concat(e)),t.prev=3,t.next=6,g.a.delete(a);case 6:r=t.sent,n({type:P,payload:r.data}),n(B("Tikety byly smaz\xe1ny.","success")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),n({type:U,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.game.game._id,n=e.ticket,c=n.tickets,s=n.loading,i=e.getTickets,u=e.deleteTickets;return Object(r.useEffect)((function(){var e=setInterval((function(){return i(t)}),5e3);return function(){return clearInterval(e)}})),s?Object(a.jsx)(ee,{}):Object(a.jsx)(a.Fragment,{children:c.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"my-1",children:[Object(a.jsx)("div",{className:"float-buttons",children:Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return u(t)},children:"Smazat tikety"})}),Object(a.jsx)("h2",{children:"Tikety"})]}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Raz\xedtko"}),Object(a.jsx)("th",{className:"hide-sm",children:"Vyd\xe1no"}),Object(a.jsx)("th",{className:"hide-sm",children:"Odevzd\xe1no"}),Object(a.jsx)("th",{children:"V\xfdsledek"})]})}),Object(a.jsx)("tbody",{children:c.map((function(e){return Object(a.jsx)(ie,{ticket:e},e._id)}))})]})]}):Object(a.jsx)("p",{children:"Je\u0161t\u011b nebyly vyd\xe1ny \u017e\xe1dn\xe9 tikety."})})})),oe=Object(m.b)((function(e){return{game:e.game}}),{getGameById:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:z}),t.prev=1,t.next=4,g.a.get("/api/games/id/".concat(e));case 4:a=t.sent,n({type:F,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},pinGame:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.put("/api/games/pin/".concat(e));case 3:a=t.sent,n({type:R,payload:a.data}),n(B("Hra byla p\u0159ipnuta na hlavn\xed str\xe1nku.","success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},unpinGame:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.put("/api/games/unpin/".concat(e));case 3:a=t.sent,n({type:R,payload:a.data}),n(B("Hra byla odepnuta z hlavn\xed str\xe1nky.","success")),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},startGame:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a,r,c,s,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.put("/api/games/start/".concat(e));case 3:a=t.sent,n({type:R,payload:a.data}),r=a.data,c=r.pinned,s=r.key,i=c?window.location.host:"".concat(window.location.host,"/game/").concat(s),navigator.clipboard.writeText(i),n(B("V\xfddej tiket\u016f byl spu\u0161t\u011bn. Odkaz na hru je ".concat(i," a byl ulo\u017een do tv\xe9ho klipboardu."),"success")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},stopGame:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.put("/api/games/stop/".concat(e));case 3:a=t.sent,n({type:R,payload:a.data}),n(B("V\xfddej tiket\u016f byl ukon\u010den. Hr\xe1\u010di maj\xed je\u0161t\u011b ".concat(a.data.timelimit," sekund na ozna\u010den\xed sv\xfdch tip\u016f."),"success")),setTimeout((function(){return n(B("\u010casov\xfd limit pro ozna\u010den\xed tip\u016f vypr\u0161el.","success"))}),1e3*a.data.timelimit),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},updateResults:function(e,t){return function(){var n=Object(f.a)(O.a.mark((function n(a){var r,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify(t),n.prev=2,n.next=5,g.a.put("/api/games/results/".concat(e),c,r);case 5:s=n.sent,a({type:R,payload:s.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:L,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.match.params.gameId,n=e.game,c=n.game,s=n.loading,i=e.getGameById,o=e.updateResults,l=e.pinGame,j=e.unpinGame,p=e.startGame,d=e.stopGame;if(Object(r.useEffect)((function(){i(t)}),[i,t]),null===c||s)return Object(a.jsx)(ee,{});var m=c._id,b=c.timelimit,h=c.numoftips,O=c.active,f=c.pinned,x=c.template,g=c.results,v=c.title;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u.b,{to:"/admin/games",className:"btn",children:"Zp\u011bt na seznam her"}),Object(a.jsxs)("div",{className:"my-1",children:[Object(a.jsxs)("div",{className:"float-buttons",children:[Object(a.jsx)("button",{className:"btn btn-warning",children:"Editovat hru"}),f?Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return j(m)},children:"Odepnout hru"}):Object(a.jsx)("button",{className:"btn btn-success",onClick:function(){return l(m)},children:"P\u0159ipnout hru"}),O?Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return d(m)},children:"Ukon\u010dit v\xfddej tiket\u016f"}):Object(a.jsx)("button",{className:"btn btn-success",onClick:function(){return p(m)},children:"Spustit v\xfddej tiket\u016f"})]}),Object(a.jsx)("h2",{children:v})]}),Object(a.jsxs)("p",{children:["Po\u010det tip\u016f: ",h]}),Object(a.jsxs)("p",{children:["\u010casov\xfd limit: ",b," sekund"]}),Object(a.jsx)(se,{template:x,results:g,handleTileClick:function(e,t){var n=g.map((function(n,a){return a===e?n.map((function(n,a){return a===t?!g[e][t]:n})):n}));o(m,n)}}),Object(a.jsx)("hr",{className:"line"}),Object(a.jsx)(ue,{})]})})),le=function(e){var t=e.template,n=e.handleTemplateChange;return t.length?Object(a.jsx)("div",{className:"bingo",children:t.map((function(e,r){return Object(a.jsx)("div",{className:"row",children:e.map((function(e,c){return Object(a.jsx)("div",{className:"column",children:Object(a.jsx)("div",{className:"tile",children:Object(a.jsx)("textarea",{className:"text","data-rowindex":r,"data-colindex":c,onChange:function(e){return n(e)},value:t[r][c]})})},c)}))},r)}))}):Object(a.jsx)(ee,{})},je=function(e,t){for(var n=[],a=0;a<t.rows;a++){for(var r=[],c=0;c<t.columns;c++)"undefined"===typeof e[a]||"undefined"===typeof e[a][c]?r.push(""):r.push(e[a][c]);n.push(r)}return n},pe=Object(m.b)(null,{createGame:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var r=Object(f.a)(O.a.mark((function r(c){var s,i,u;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={headers:{"Content-Type":"application/json"}},i=Object(l.a)(Object(l.a)({},e),{},{template:t}),r.prev=2,r.next=5,g.a.post("/api/games",i,s);case 5:u=r.sent,c({type:I,payload:u.data}),c(B("Hra byla p\u0159id\xe1na.","success")),a||n.push("/admin/games"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(2),c({type:L,payload:{msg:r.t0.response.statusText,status:r.t0.response.status}});case 14:case"end":return r.stop()}}),r,null,[[2,11]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.createGame,n=e.history,c=Object(r.useState)({title:"",timelimit:"15",numoftips:"3"}),s=Object(Q.a)(c,2),i=s[0],o=s[1],j=Object(r.useState)({rows:3,columns:3}),p=Object(Q.a)(j,2),d=p[0],m=p[1],b=Object(r.useState)([]),h=Object(Q.a)(b,2),O=h[0],f=h[1],x=i.title,g=i.timelimit,v=i.numoftips,y=d.rows,k=d.columns;Object(r.useEffect)((function(){f(je(O,d))}),[f,d]);var w=function(e){o(Object(l.a)(Object(l.a)({},i),{},Object(W.a)({},e.target.name,e.target.value)))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"Vytvo\u0159it hru"}),Object(a.jsxs)("form",{className:"form my-1",onSubmit:function(e){return function(e){e.preventDefault(),t(i,O,n)}(e)},children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"title",children:"N\xe1zev:"}),Object(a.jsx)("input",{type:"text",name:"title",value:x,onChange:function(e){return w(e)}}),Object(a.jsx)("small",{className:"form-text",children:"N\xe1zev je jen ozna\u010den\xed pro tebe, hr\xe1\u010di jej neuvid\xed."})]}),Object(a.jsxs)("div",{className:"form-row",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"timelimit",children:"\u010casov\xfd limit:"}),Object(a.jsx)("input",{type:"number",name:"timelimit",value:g,onChange:function(e){return w(e)}}),Object(a.jsx)("small",{className:"form-text",children:"Kolik vte\u0159in budou hr\xe1\u010di m\xedt na sv\xe9 tipy."})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"timelimit",children:"Po\u010det tip\u016f:"}),Object(a.jsx)("input",{type:"number",name:"numoftips",value:v,onChange:function(e){return w(e)}}),Object(a.jsx)("small",{className:"form-text",children:"Kolik tip\u016f bude hr\xe1\u010d zad\xe1vat."})]})]}),Object(a.jsxs)("div",{className:"form-row",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"rowsInput",children:"\u0158\xe1dk\u016f:"}),Object(a.jsx)("input",{type:"number",id:"rowsInput",name:"rows",value:y,onChange:function(e){return m(Object(l.a)(Object(l.a)({},d),{},{rows:e.target.value}))}}),Object(a.jsx)("small",{className:"form-text",children:"Kolik \u0159\xe1dk\u016f bude tabulka m\xedt."})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{htmlFor:"columnsInput",children:"Sloupc\u016f:"}),Object(a.jsx)("input",{type:"number",placeholder:"Po\u010det sloupc\u016f",id:"columnsInput",name:"columns",value:k,onChange:function(e){return m(Object(l.a)(Object(l.a)({},d),{},{columns:e.target.value}))}}),Object(a.jsx)("small",{className:"form-text",children:"Kolik sloupc\u016f bude tabulka m\xedt."})]})]}),Object(a.jsx)(le,{template:O,handleTemplateChange:function(e){var t=parseInt(e.target.getAttribute("data-rowindex")),n=parseInt(e.target.getAttribute("data-colindex"));f((function(a){return a.map((function(a,r){return r===t?a.map((function(t,a){return a===n?e.target.value:t})):a}))}))}}),Object(a.jsx)("input",{type:"submit",className:"btn btn-primary my-1",value:"Vytvo\u0159it"}),Object(a.jsx)(u.b,{to:"/admin/games",className:"btn btn-light my-1",children:"Zru\u0161it"})]})]})})),de=function(e){var t=e.user,n=(t._id,t.name),r=t.email,c=t.lastlog;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n}),Object(a.jsx)("td",{className:"hide-sm",children:r}),Object(a.jsx)("td",{className:"hide-sm",children:Object(a.jsx)(ne.a,{format:"D. M. YYYY H:mm",children:c})}),Object(a.jsx)("td",{})]})},me=Object(m.b)((function(e){return{user:e.user}}),{getUsers:function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/api/users");case 3:n=e.sent,t({type:K,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:H,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getUsers,n=e.user,c=n.users,s=n.loading;return Object(r.useEffect)((function(){t()}),[t]),s?Object(a.jsx)(ee,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"my-1",children:Object(a.jsx)("h2",{children:"Spr\xe1va \xfa\u010dt\u016f"})}),Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Jm\xe9no"}),Object(a.jsx)("th",{className:"hide-sm",children:"E-mail"}),Object(a.jsx)("th",{className:"hide-sm",children:"Posledn\xed p\u0159ihl\xe1\u0161en\xed"}),Object(a.jsx)("th",{})]})}),Object(a.jsx)("tbody",{children:c.map((function(e){return Object(a.jsx)(de,{user:e},e._id)}))})]})]})})),be=(n(74),function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z,{}),Object(a.jsxs)("section",{className:"container",children:[Object(a.jsx)(b,{}),Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:"/login",component:X}),Object(a.jsx)(o.b,{exact:!0,path:"/register",component:$}),Object(a.jsx)(q,{exact:!0,path:"/admin",component:re}),Object(a.jsx)(q,{exact:!0,path:"/admin/games",component:re}),Object(a.jsx)(q,{exact:!0,path:"/admin/games/create",component:pe}),Object(a.jsx)(q,{exact:!0,path:"/admin/game/:gameId",component:oe}),Object(a.jsx)(q,{exact:!0,path:"/admin/users",component:me})]})]})]})}),he=Object(m.b)((function(e){return{game:e.game}}),{getTicket:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post("/api/tickets/".concat(e));case 3:a=t.sent,n({type:Y,payload:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:U,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.game.game,n=e.getTicket,r=t.timelimit,c=t.numoftips;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Po obdr\u017een\xed tiketu bude\u0161 m\xedt ",r," sekund, abys ozna\u010dil ",c," pol\xed\u010dek."]}),Object(a.jsx)("button",{className:"btn btn-primary my-2",onClick:function(){return n(t._id)},children:"Z\xedskat tiket"})]})})),Oe=n(20),fe=Object(m.b)((function(e){return{game:e.game,ticket:e.ticket}}),{submitTicket:function(e,t){return function(){var n=Object(f.a)(O.a.mark((function n(a){var r,c,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c={tips:t},n.prev=2,n.next=5,g.a.put("/api/tickets/".concat(e),c,r);case 5:s=n.sent,a({type:Y,payload:s.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:U,payload:{msg:n.t0.response.statusText,status:n.t0.response.status}});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.game,n=t.game,c=t.loading,s=e.ticket,i=s.ticket,u=(s.ticket,e.submitTicket),o=Object(r.useState)(0),l=Object(Q.a)(o,2),j=l[0],p=l[1],d=Object(r.useState)(0),m=Object(Q.a)(d,2),b=m[0],h=m[1],O=Object(r.useState)([]),f=Object(Q.a)(O,2),x=f[0],g=f[1],v=Object(r.useState)([]),y=Object(Q.a)(v,2),k=y[0],w=y[1],N=n.timelimit,T=n.numoftips,E=n.template,S=i._id,C=i.stamp;Object(r.useEffect)((function(){g(Object(Oe.a)(E.map((function(e){return Object(Oe.a)(e.map((function(e){return!1})))})))),w(Object(Oe.a)(E.map((function(e){return Object(Oe.a)(e.map((function(e){return!1})))}))))}),[g,w,E]),Object(r.useEffect)((function(){h(x.flat().filter(Boolean).length)}),[x,h]),Object(r.useEffect)((function(){p(N)}),[p,N]),Object(r.useEffect)((function(){var e=setInterval((function(){j>0&&p(j-1)}),1e3);return function(){clearInterval(e)}}));var G=function(e,t){!i.tips.length&&j>0&&function(e,t){if(b<T){var n=x.map((function(n,a){return a===e?n.map((function(n,a){return a===t?!x[e][t]:n})):n}));g(n)}else{var a=x.map((function(n,a){return a===e?n.map((function(e,n){return n!==t&&e})):n}));g(a)}}(e,t),i.tips.length&&function(e,t){var n=k.map((function(n,a){return a===e?n.map((function(n,a){return a===t?!k[e][t]:n})):n}));w(n)}(e,t)};return!c&&x.length&&k.length?Object(a.jsx)(a.Fragment,{children:i.tips.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Te\u010f m\u016f\u017ee\u0161 ozna\u010dovat v\xfdsledky."}),Object(a.jsx)(se,{template:E,tips:i.tips,results:k,handleTileClick:G}),Object(a.jsx)("span",{className:"stamp",children:C})]}):Object(a.jsxs)(a.Fragment,{children:[j>0?Object(a.jsxs)("p",{children:["Zb\xfdv\xe1 ",j," sekund."]}):Object(a.jsx)("p",{children:"\u010casov\xfd limit vypr\u0161el. Odevzdej sv\u016fj tiket, pros\xedm."}),Object(a.jsx)(se,{template:E,tips:x,results:k,handleTileClick:G}),Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){return u(S,x),void p(0)},children:"Odevzdat tiket"})]})}):Object(a.jsx)(ee,{})})),xe=Object(m.b)((function(e){return{game:e.game,ticket:e.ticket}}),{getGameByKey:function(e){return function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:z}),t.prev=1,t.next=4,g.a.get("/api/games/key/".concat(e));case 4:a=t.sent,n({type:F,payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:L,payload:{msg:t.t0.response.statusText,status:t.t0.response.status}});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.match.params.gameKey,n=e.game,c=n.game,s=n.loading,i=e.ticket,u=i.ticket,o=i.loading,l=e.getGameByKey;return Object(r.useEffect)((function(){l(t)}),[l,t]),s?Object(a.jsx)(ee,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:window.location.origin+"/images/logo.png",alt:"Twitch Bingo by TenMatous"}),!o&&u&&u.game===c._id?Object(a.jsx)(fe,{}):Object(a.jsx)(he,{})]})})),ge=Object(m.b)((function(e){return{game:e.game,ticket:e.ticket}}),{getPinnedGame:function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:z}),e.prev=1,e.next=4,g.a.get("/api/games/pinned");case 4:n=e.sent,t({type:F,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:L,payload:{msg:e.t0.response.statusText,status:e.t0.response.status}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.match.params.gameKey,n=e.game,c=n.game,s=n.loading,i=e.ticket,u=i.ticket,o=i.loading,l=e.getPinnedGame;return Object(r.useEffect)((function(){l(t)}),[l,t]),s?Object(a.jsx)(ee,{}):s||null!==c?Object(a.jsx)(a.Fragment,{children:!o&&u&&u.game===c._id?Object(a.jsx)(fe,{}):Object(a.jsx)(he,{})}):Object(a.jsx)("p",{children:"Aktu\xe1ln\u011b tu nen\xed \u017e\xe1dn\xe1 hra."})})),ve=(n(75),n(17)),ye=n(42),ke=n(43),we=[],Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case y:return[].concat(Object(Oe.a)(e),[a]);case k:return e.filter((function(e){return e.id!==a}));default:return e}},Te={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case T:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!0,loading:!1,user:a});case w:case S:return localStorage.setItem("token",a.token),Object(l.a)(Object(l.a)(Object(l.a)({},e),a),{},{isAuthenticated:!0,loading:!1});case N:case C:case E:case G:case A:return localStorage.removeItem("token"),Object(l.a)(Object(l.a)({},e),{},{token:null,user:null,isAuthenticated:!1,loading:!1});default:return e}},Se={games:[],game:null,loading:!0,error:{}},Ce={ticket:null,tickets:[],loading:!0,error:{}},Ge={users:[],game:null,loading:!0,error:{}},Ae=Object(ve.combineReducers)({alert:Ne,auth:Ee,game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case _:return Object(l.a)(Object(l.a)({},e),{},{games:a,loading:!1});case F:case R:return Object(l.a)(Object(l.a)({},e),{},{game:a,loading:!1});case z:return Object(l.a)(Object(l.a)({},e),{},{game:null,loading:!1});case I:return Object(l.a)(Object(l.a)({},e),{},{games:[a,e.games],loading:!1});case D:return Object(l.a)(Object(l.a)({},e),{},{games:e.games.filter((function(e){return e._id!==a})),loading:!1});case L:return Object(l.a)(Object(l.a)({},e),{},{error:a,loading:!1});default:return e}},ticket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case Y:return Object(l.a)(Object(l.a)({},e),{},{ticket:a,loading:!1});case M:case P:return Object(l.a)(Object(l.a)({},e),{},{tickets:a,loading:!1});case U:return Object(l.a)(Object(l.a)({},e),{},{error:a,loading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case K:return Object(l.a)(Object(l.a)({},e),{},{users:a,loading:!1});case H:return Object(l.a)(Object(l.a)({},e),{},{error:a,loading:!1});default:return e}}}),_e=[ke.a],Fe=Object(ve.createStore)(Ae,{},Object(ye.composeWithDevTools)(ve.applyMiddleware.apply(void 0,_e)));localStorage.token&&J(localStorage.token);var Ie=function(){return Object(r.useEffect)((function(){Fe.dispatch(V())}),[]),Object(a.jsx)(m.a,{store:Fe,children:Object(a.jsx)(u.a,{children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)(d,{exact:!0,path:"/",component:ge}),Object(a.jsx)(d,{exact:!0,path:"/game/:gameKey",component:xe}),Object(a.jsx)(o.b,{component:be})]})})})},Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(Ie,{})}),document.getElementById("root")),Re()}},[[76,1,2]]]);
//# sourceMappingURL=main.8a133b0b.chunk.js.map